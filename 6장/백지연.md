# 6ìž¥ ë¹„ë™ê¸° ì½”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

## ë¹„ë™ê¸° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

### ìž‘ì—… ê¸°ë‹¤ë¦¬ê¸°
AAA íŒ¨í„´ì—ì„œ ì‹¤í–‰ ë‹¨ê³„ì— í•´ë‹¹í•˜ëŠ” ActëŠ” ìš°ë¦¬ê°€ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.  
ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸ í”„ë ˆìž„ì›Œí¬ëŠ” ì´ë¥¼ ìœ„í•œ í—¬í¼ í•¨ìˆ˜ë¥¼ ê°–ê³  ìžˆë‹¤.  

ì œìŠ¤íŠ¸ì—ì„œ doneì€ ë¹„ë™ê¸° ì½”ë“œê°€ ì™„ë£Œë˜ì—ˆìŒì„ ì œìŠ¤íŠ¸ì— ì•Œë¦¬ëŠ” ì½œë°± í•¨ìˆ˜ë‹¤.  
doneì´ í˜¸ì¶œë  ë•Œê¹Œì§€ í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ê³  ê°„ì£¼í•˜ê³  ê¸°ë‹¤ë¦°ë‹¤.  
doneì´ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ íƒ€ìž„ì•„ì›ƒ(5ì´ˆ) í›„ì— í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.  

> https://vitest.dev/guide/migration.html#done-callback
> 
> From Vitest v0.10.0, the callback style of declaring tests is deprecated.  
> You can rewrite them to use async/await functions, or use Promise to mimic the callback style.
> 
> Vitest v0.10.0ë¶€í„°ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì„ ì–¸í•˜ëŠ” ì½œë°± ìŠ¤íƒ€ì¼ì´ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
> async/awaitë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ Promiseë¥¼ ì‚¬ìš©í•˜ì—¬ ì½œë°± ìŠ¤íƒ€ì¼ì„ ëª¨ë°©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 

### async/awaitë¥¼ ì‚¬ìš©í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸
ë¹„ë™ê¸° ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ async/await ë¬¸ë²•ì„ ì ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ê°€ ê±°ì˜ ì¼ë°˜ì ì¸ ê°’ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ì²˜ëŸ¼ ê°„ë‹¨í•´ì§„ë‹¤.

## ì½”ë“œë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ì í•©í•˜ê²Œ ë§Œë“¤ê¸°
**ì§„ìž…ì  ë¶„ë¦¬ íŒ¨í„´**, **ì–´ëŒ‘í„° ë¶„ë¦¬ íŒ¨í„´**ì„ ì‚¬ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.

### ì§„ìž…ì  ë¶„ë¦¬ íŒ¨í„´
ìˆœìˆ˜ ë¡œì§ì„ ë³„ë„ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ì—¬ ê·¸ í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸ì˜ ì‹œìž‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

### ì–´ëŒ‘í„° ë¶„ë¦¬ íŒ¨í„´
ë¹„ë™ê¸°ì ì¸ ìš”ì†Œë¥¼ ë¶„ë¦¬í•˜ê³  ì´ë¥¼ ì¶”ìƒí™”í•˜ì—¬ ë™ê¸°ì ì¸ ìš”ì†Œë¡œ ëŒ€ì²´í•˜ëŠ” íŒ¨í„´  
ì•žì„  íŒ¨í„´ê³¼ ë°˜ëŒ€ì˜ ì ‘ê·¼ë²•  
ì˜ì¡´ì„±ìœ¼ë¡œ ìžˆë˜ ë¹„ë™ê¸° ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ì—¬ ì–´ëŒ‘í„°ë¡œ ê°ì‹¸ê³ , ë‹¤ë¥¸ ì˜ì¡´ì„±ì²˜ëŸ¼ ì£¼ìž…í•  ìˆ˜ ìžˆê²Œ í•œë‹¤.  
ì–´ëŒ‘í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì— ë§žëŠ” ë‹¨ìˆœí™”ëœ ì¸í„°íŽ˜ì´ìŠ¤ ë§Œë“¤ê¸° = ì¸í„°íŽ˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™(ISP)

## íƒ€ì´ë¨¸ ë‹¤ë£¨ê¸°
ì–´ëŒ‘í„°ì™€ ì§„ìž…ì ì„ ë¶„ë¦¬í•˜ëŠ” ëŒ€ì‹ , íƒ€ì´ë¨¸ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•˜ê³  ìš°íšŒí•˜ëŠ” ê²ƒì´ ë‚˜ì„ ë•Œë„ ìžˆë‹¤.  
í•¨ìˆ˜ë¥¼ ì§ì ‘ ëª½í‚¤ íŒ¨ì¹­í•˜ê±°ë‚˜ í”„ë ˆìž„ì›Œí¬ë¥¼ ì‚¬ìš©í•´ íƒ€ì´ë¨¸ë¥¼ ë¹„í™œì„±í™”í•˜ê³  ì œì–´í•˜ë©´ ëœë‹¤.

### ëª½í‚¤ íŒ¨ì¹­ìœ¼ë¡œ íƒ€ì´ë¨¸ë¥¼ ìŠ¤í…ìœ¼ë¡œ ë§Œë“¤ê¸°
ëª½í‚¤ íŒ¨ì¹­ : í”„ë¡œê·¸ëž¨ì´ ì‹¤í–‰ ì¤‘ì¸ ë™ì•ˆ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë¡œì»¬ì—ì„œ í™•ìž¥í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ë°©ë²•  
ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ê°€ í•„ìš”í•˜ê³ , í…ŒìŠ¤íŠ¸ê°€ ëë‚  ë•Œë§ˆë‹¤ ëª½í‚¤ íŒ¨ì¹­ëœ í•¨ìˆ˜ë¥¼ ì›ëž˜ëŒ€ë¡œ ë˜ëŒë¦¬ë©´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ì‰½ë‹¤.

### ì œìŠ¤íŠ¸ë¡œ setTimeout ëŒ€ì²´
ì œìŠ¤íŠ¸ëŠ” íƒ€ì´ë¨¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ 3ê°€ì§€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.  
ì´ëŸ° í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.  

- `jest.useFakeTimers` : setTimeout ê°™ì€ ë‹¤ì–‘í•œ íƒ€ì´ë¨¸ í•¨ìˆ˜ë¥¼ ìŠ¤í…ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤.
- `jest.resetAllTimers` : ëª¨ë“  ê°€ì§œ íƒ€ì´ë¨¸ë¥¼ ì‹¤ì œ íƒ€ì´ë¨¸ë¡œ ìž¬ì„¤ì •í•œë‹¤.
- `jest.advanceTimersToNextTimer` : ê°€ì§œ íƒ€ì´ë¨¸ë¥¼ ìž‘ë™ì‹œì¼œ ì½œë°±ì„ ì‹¤í–‰í•œë‹¤. ì‹¤í–‰í•˜ë©´ ë‹¤ìŒì— ì˜ˆì •ëœ íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ëœë‹¤.

> [vi.useFakeTimers](https://vitest.dev/api/vi.html#vi-usefaketimers)  
> [vi.clearAllTimers](https://vitest.dev/api/vi.html#vi-clearalltimers) + [vi.useRealTimers](https://vitest.dev/api/vi.html#vi-userealtimers)  
> [vi.advanceTimersToNextTimer](https://vitest.dev/api/vi.html#vi-advancetimerstonexttimer)

## ì¼ë°˜ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬

### ì´ë²¤íŠ¸ ì´ë¯¸í„°(event emitter)
ì•¡ì…˜ì´ ì™„ë£Œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚´ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ê°ì²´ë‹¤.  
ì´ë²¤íŠ¸ ì´ë¯¸í„°ì—ì„œ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤.  
ì´ ê²½ìš° ì´ë²¤íŠ¸ëŠ” ì‹ë³„ ë¬¸ìžì—´ê³¼ ë¦¬ìŠ¤ë„ˆì— ì „ë‹¬í•  ë°ì´í„°ë¥¼ í¬í•¨í•œë‹¤.

ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê°€ìž¥ ê°„ë‹¨í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë°©ë²•  
â†’ í…ŒìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ê³  í•¨ìˆ˜ë¥¼ í˜¸ì¤„í•  ë•Œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸

### í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
- ðŸ‘Ž : í´ë¦­ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ê³  ì‹¤ì œë¡œ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸
- ðŸ‘ : í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ë°œìƒì‹œì¼œ íŽ˜ì´ì§€ ë‚´ë¶€ ê°’ì´ ì˜¬ë°”ë¥´ê²Œ ë³€ê²½ëëŠ”ì§€ í™•ì¸(í´ë¦­ì´ ì‹¤ì œë¡œ ì–´ë–¤ ìž‘ì—…ì„ ìˆ˜í–‰í–ˆëŠ”ì§€ í™•ì¸)

## DOM í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë„ìž…
ì›¹ íŽ˜ì´ì§€ì™€ ìƒí˜¸ ìž‘ìš©í•˜ëŠ” ì‚¬ìš©ìž ê´€ì ì— ë” ê°€ê¹Œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ìž‘ì„±í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— DOM Testing Library ì‚¬ìš©ì„ ê¶Œìž¥í•œë‹¤.  
> https://github.com/testing-library/dom-testing-library  
> https://testing-library.com/docs/dom-testing-library/cheatsheet
