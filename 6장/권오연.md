### 6.1 비동기 데이터 가져오기

- 콜백 버전
- async / await 버전
- 통합 테스트를 이용한 첫 시도
  - 제스트에서 제공하는 done() 함수
- 작업 기다리기
  - 제스트의 테스트 함수 내에서 매개변수로 전달받을 수 있는 done 콜백을 사용하여 테스트가 done()을 명시적으로 호출할 때까지 기다려야 한다고 신호를 보냄. done()이 호출되지 않으면 테스트는 기본적으로 5초 후에 타임아웃되어 실패.
- async/await 를 사용하는 통합 테스트
  - done과 then 같은 콜백을 사용하는 것보다 더 간단하고 가독성 좋은 코드가 된다.
- 통합 테스트의 어려움
  - 긴 실행 시간: 단위 테스트에 비해 오래 걸림
  - 불안정성: 환경에 따라 일관성 없는 결과가 나타날 수 있음
  - 테스트와는 관계없는 코드나 환경 검증: 개발자가 신경쓰지 않는 환경까지 테스트
  - 파악하는데 더 많은 시간이 걸림
  - 상황을 재현하기 어려움
  - 결과를 신뢰하기 어려움

### 6.2 코드를 단위 테스트에 적합하게 만들기

- 진입점 분리 패턴
  - 비동기 코드와 순수 로직 부분을 별도의 함수로 분리
- 어댑터 분리 패턴
  - 비동기적인 요소를 분리하고 추상화해 동기적인 요소로 대체

### 6.3 타이머 다루기

- 몽키 패칭으로 타이머를 스텁으로 만들기
  - 몽키 패칭: 프로그램이 실행 중인 동안 시스템 소프트웨어를 로컬에서 확장하거나 수정하는 방법
- 제스트로 setTimeout 대체
  - jest.useFakeTimers
  - jest.resetAllTimers
  - jest.advanceTimersToNextTimer

### 6.4 일반적인 이벤트 처리

- 이벤트 이미터
  - Node.js에서 액션이 완료되었음을 알리기 위해 메시지를 보내 이벤트를 발생시키는 객체
- 클릭 이벤트 처리
  - `button.click()` 으로 실제 버튼 이벤트를 발생시키는 것이 나음

### 6.5 DOM 테스트 라이브러리 도입

- @testing-library/dom 을 활용

### 추가

- https://www.daleseo.com/jest-async/
