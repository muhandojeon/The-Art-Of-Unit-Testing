## 2장 첫번째 단위 테스트

제스트는 페이스북에서 만든 오픈 소스 테스트 프레임워크다. 원래는 자바스크립트에서 프런트엔드 리액트 컴포넌트를 테스트하려고 만들었다
> 원래는 자바스크립트 테스트를 위한 프레임워크 였다가 리액트 인기가 많아지면서 확대된걸로 알고 있는데 번역 오류가 아닌가 생각이 드네요

### 테스트 파일 위치 관리
1. __tests__ 폴더 하위에 놓기
  - 필자는 이걸 선호, 이유는 테스트에 필요한 헬퍼 파일을 테스트 폴더 근처에 둘 수 있어서 편리함떄문에
2. 테스트 대상 파일이나 모듈 옆에 co-location

### 준비-실행-검증 패턴 (AAA패턴)
테스트 코드 작성할 때 테스트를 어떻게 작성할지에 대한 고민을 하는데, 준비(Arrange)-실행(Act)-검증(Assert) 패턴을 사용하면 고민을 해결할 수 있다고 함
> 우리나라에서는 Given-When-Then 패턴으로 널리 알려져 있다고 하네요


### 테스트 코드 테스트
TDD 하지 않았을 때는 코드의 특정 부분을 수정하면서 테스트 성공하는지 보는 것도 신뢰성 얻기에 좋은 방법임
> 번역자 노트에 이렇게 적혀 있다. 'TDD, BDD가 정답 같아 보이는데 그렇지 않다. 테스트는 하고 싶은 대로 해도 된다.' TDD 안해봤지만.. 역자분이 말씀하신거에 동감한다(?)

### USE 전략
테스트 코드 이름 잘 짓는게 무엇보다 중요하다! 제목만 봐도 무엇을 테스트 하려고 하는지 알아차릴 수 있어야 된다. 
이름 지을 때 아래 세가지 요소를 고려하면 도움이 된다고 하니 기억하자
- 테스트하려는 대상(Unit)
- 입력 값이나 상황에 대한 설명(Senario)
- 기댓값이나 결과에 대한 설명(Expectation)

=> 테스트 대상을 명시하고 어떤 입력이나 상황이 주어지면 어떤 결과로 이어져야 하는지 간결하고 명확하게 적는다

> USE 전략은 책 검토자분이 만든 이름이라고 하네요

### 문자열 비교와 유지 보수성
화면의 디자인 관점에서 문장 끝에 공백이 추가되거나 마침표가 빠질 수 있다.    
중요한 것은 메시지가 담고 있는 의미다. 메시지 의미가 같다면 문장의 마침표가 새로 추가도니 정도의 변경은 테스트 결과에 영향을 주지 않아야 한다.    
이것이 필자가 테스트에서 권장하고 싶은 사고방식이다.   
그래서 toMatch() 메서드에 정규표현식을 전달하거나 toContain() 메서드로 거짓 양성의 가능성을 낮춰야 한다!

### describe() 함수로 구역 나누기
- describe 함수를 사용하면 코드 구조를 좀 더 체계적으로 나누고 관리할 수 있음
- describe 함수는 가독성 측면에서 논리적인 영역의 역할을 하기도 하지만 기능적으로도 독립적인 테스트 환경을 보장하기도 함

### it() 함수
test() 함수의 별칭이라고 함

> test()보다 it()함수가 더 명료하다고 생각 하게 된 일화가 재밌었다. (test returns errors vs it returns errors)

### verifyPassword() 함수 리팩토링

- 만약 작업 단위의 표면적 범위가 넓어졌다면(테스트 해야 할 코드의 범위와 복잡성이 증가했다) 추가 검증 코드를 별도의 테스트 케이스로 분리해라

이랬을 떄 검증 룰렛 문제는 해결 할 수 있지만 중복코드가 많아질 수 있다. 

이 때 beforeEach() 함수를 통해 각 테스트가 실행되기 전에 중복 코드를 한번만 선언하여 실행 시킬 수 있다. 

> 여기서 또 번역자 분이 좋은 말 해주신다.   
> 테스트 코드에 한해서 모든 로직을 공통화 해버리면 오히려 코드 결합도가 높아지고 유연성이 떨어져 추후 유지보수에 어려움이 있을 수 있다.   
> 로직을 공통화하지 않는 만큼 코드 중복을 어느정도 허용해도 되니까 지금은 내 코드 따라하고 나중에는 자신만의 테스트 철학을 가지고 해라.

### beforeEach() 함수와 스크롤 피로감

이번 리팩토링으로 코드 중복은 없앴지만 시나리오가 늘어나고 파일이 커지면 테스트 파일을 이해하기 위해 위아래로 스크롤해야 되는 불편함이 생김

실제 프로젝트에서 beforeEach 함수가 종종 쓰레기통 신세가 됨. 누군가 초기화 코드부터 이것저것 넣으면 일종의 면죄부가 되어 '나도 일단 놓고 보자' 마인드가 될 수 있다.

중그래서 필자는 beforeEach() 함수를 그다지 좋아하지 않는다고 함

### 팩토리 함수 사용
중복을 최소화 하고 동일한 로직을 재사용 할 수 있는 간단한 헬퍼함수 이다.

beforeEach 사용하는 것보다
1. 코드 가독성도 높아지고 유지보수가 쉬워진다.
2. 스크롤 피로감도 줄어든다.
3. 객체가 어떻게 생성되는지 몰라도 언제 생성되고 어떤 중요한 매개변수로 초기화되는지 알 수 있다고 한다.
   
